---
title: Rediså®‰è£…è¯´æ˜ ğŸ”¥
date: 2023-03-20
categories:
  - Java
  - Redis
tags:
  - Redis
sticky: 3
---

# Rediså®‰è£…è¯´æ˜

å¤§å¤šæ•°ä¼ä¸šéƒ½æ˜¯åŸºäºLinuxæœåŠ¡å™¨æ¥éƒ¨ç½²é¡¹ç›®ï¼Œè€Œä¸”Rediså®˜æ–¹ä¹Ÿæ²¡æœ‰æä¾›Windowsç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚å› æ­¤è¯¾ç¨‹ä¸­æˆ‘ä»¬ä¼šåŸºäºLinuxç³»ç»Ÿæ¥å®‰è£…Redis.

æ­¤å¤„é€‰æ‹©çš„Linuxç‰ˆæœ¬ä¸ºCentOS 7.

Redisçš„å®˜æ–¹ç½‘ç«™åœ°å€ï¼šhttps://redis.io/





# 1.å•æœºå®‰è£…Redis

## 1.1.å®‰è£…Redisä¾èµ–

Redisæ˜¯åŸºäºCè¯­è¨€ç¼–å†™çš„ï¼Œå› æ­¤é¦–å…ˆéœ€è¦å®‰è£…Redisæ‰€éœ€è¦çš„gccä¾èµ–ï¼š

```sh
yum install -y gcc tcl
```



## 1.2.ä¸Šä¼ å®‰è£…åŒ…å¹¶è§£å‹

ç„¶åå°†è¯¾å‰èµ„æ–™æä¾›çš„Rediså®‰è£…åŒ…ä¸Šä¼ åˆ°è™šæ‹Ÿæœºçš„ä»»æ„ç›®å½•ï¼š

![image-20211211071712536](assets/image-20211211071712536.png)

ä¾‹å¦‚ï¼Œæˆ‘æ”¾åˆ°äº†/usr/local/src ç›®å½•ï¼š

![image-20211211080151539](assets/image-20211211080151539.png)

è§£å‹ç¼©ï¼š

```sh
tar -xzf redis-6.2.6.tar.gz
```

è§£å‹åï¼š

![image-20211211080339076](assets/image-20211211080339076.png)

è¿›å…¥redisç›®å½•ï¼š

```sh
cd redis-6.2.6
```



è¿è¡Œç¼–è¯‘å‘½ä»¤ï¼š

```sh
make && make install
```

å¦‚æœæ²¡æœ‰å‡ºé”™ï¼Œåº”è¯¥å°±å®‰è£…æˆåŠŸäº†ã€‚



é»˜è®¤çš„å®‰è£…è·¯å¾„æ˜¯åœ¨ `/usr/local/bin`ç›®å½•ä¸‹ï¼š

![image-20211211080603710](assets/image-20211211080603710.png)

è¯¥ç›®å½•ä»¥åŠé»˜è®¤é…ç½®åˆ°ç¯å¢ƒå˜é‡ï¼Œå› æ­¤å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹è¿è¡Œè¿™äº›å‘½ä»¤ã€‚å…¶ä¸­ï¼š

- redis-cliï¼šæ˜¯redisæä¾›çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯
- redis-serverï¼šæ˜¯redisçš„æœåŠ¡ç«¯å¯åŠ¨è„šæœ¬
- redis-sentinelï¼šæ˜¯redisçš„å“¨å…µå¯åŠ¨è„šæœ¬



## 1.3.å¯åŠ¨

redisçš„å¯åŠ¨æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ï¼š

- é»˜è®¤å¯åŠ¨
- æŒ‡å®šé…ç½®å¯åŠ¨
- å¼€æœºè‡ªå¯



### 1.3.1.é»˜è®¤å¯åŠ¨

å®‰è£…å®Œæˆåï¼Œåœ¨ä»»æ„ç›®å½•è¾“å…¥redis-serverå‘½ä»¤å³å¯å¯åŠ¨Redisï¼š

```
redis-server
```

å¦‚å›¾ï¼š

![image-20211211081716167](assets/image-20211211081716167.png)



è¿™ç§å¯åŠ¨å±äº`å‰å°å¯åŠ¨`ï¼Œä¼šé˜»å¡æ•´ä¸ªä¼šè¯çª—å£ï¼Œçª—å£å…³é—­æˆ–è€…æŒ‰ä¸‹`CTRL + C`åˆ™Redisåœæ­¢ã€‚ä¸æ¨èä½¿ç”¨ã€‚



### 1.3.2.æŒ‡å®šé…ç½®å¯åŠ¨

å¦‚æœè¦è®©Redisä»¥`åå°`æ–¹å¼å¯åŠ¨ï¼Œåˆ™å¿…é¡»ä¿®æ”¹Redisé…ç½®æ–‡ä»¶ï¼Œå°±åœ¨æˆ‘ä»¬ä¹‹å‰è§£å‹çš„rediså®‰è£…åŒ…ä¸‹ï¼ˆ`/usr/local/src/redis-6.2.6`ï¼‰ï¼Œåå­—å«redis.confï¼š

![image-20211211082225509](assets/image-20211211082225509.png)

æˆ‘ä»¬å…ˆå°†è¿™ä¸ªé…ç½®æ–‡ä»¶å¤‡ä»½ä¸€ä»½ï¼š

```
cp redis.conf redis.conf.bck
```



ç„¶åä¿®æ”¹redis.confæ–‡ä»¶ä¸­çš„ä¸€äº›é…ç½®ï¼š

```properties
# å…è®¸è®¿é—®çš„åœ°å€ï¼Œé»˜è®¤æ˜¯127.0.0.1ï¼Œä¼šå¯¼è‡´åªèƒ½åœ¨æœ¬åœ°è®¿é—®ã€‚ä¿®æ”¹ä¸º0.0.0.0åˆ™å¯ä»¥åœ¨ä»»æ„IPè®¿é—®ï¼Œç”Ÿäº§ç¯å¢ƒä¸è¦è®¾ç½®ä¸º0.0.0.0
bind 0.0.0.0
# å®ˆæŠ¤è¿›ç¨‹ï¼Œä¿®æ”¹ä¸ºyesåå³å¯åå°è¿è¡Œ
daemonize yes 
# å¯†ç ï¼Œè®¾ç½®åè®¿é—®Rediså¿…é¡»è¾“å…¥å¯†ç 
requirepass 123321
```



Redisçš„å…¶å®ƒå¸¸è§é…ç½®ï¼š

```properties
# ç›‘å¬çš„ç«¯å£
port 6379
# å·¥ä½œç›®å½•ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œredis-serveræ—¶çš„å‘½ä»¤ï¼Œæ—¥å¿—ã€æŒä¹…åŒ–ç­‰æ–‡ä»¶ä¼šä¿å­˜åœ¨è¿™ä¸ªç›®å½•
dir .
# æ•°æ®åº“æ•°é‡ï¼Œè®¾ç½®ä¸º1ï¼Œä»£è¡¨åªä½¿ç”¨1ä¸ªåº“ï¼Œé»˜è®¤æœ‰16ä¸ªåº“ï¼Œç¼–å·0~15
databases 1
# è®¾ç½®redisèƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§å†…å­˜
maxmemory 512mb
# æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºç©ºï¼Œä¸è®°å½•æ—¥å¿—ï¼Œå¯ä»¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶å
logfile "redis.log"
```



å¯åŠ¨Redisï¼š

```sh
# è¿›å…¥rediså®‰è£…ç›®å½• 
cd /usr/local/src/redis-6.2.6
# å¯åŠ¨
redis-server redis.conf
```



åœæ­¢æœåŠ¡ï¼š

```sh
# åˆ©ç”¨redis-cliæ¥æ‰§è¡Œ shutdown å‘½ä»¤ï¼Œå³å¯åœæ­¢ Redis æœåŠ¡ï¼Œ
# å› ä¸ºä¹‹å‰é…ç½®äº†å¯†ç ï¼Œå› æ­¤éœ€è¦é€šè¿‡ -u æ¥æŒ‡å®šå¯†ç 
redis-cli -u 123321 shutdown
```



### 1.3.3.å¼€æœºè‡ªå¯

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ¥å®ç°å¼€æœºè‡ªå¯ã€‚

é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªç³»ç»ŸæœåŠ¡æ–‡ä»¶ï¼š

```sh
vi /etc/systemd/system/redis.service
```

å†…å®¹å¦‚ä¸‹ï¼š

```conf
[Unit]
Description=redis-server
After=network.target

[Service]
Type=forking
ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf
PrivateTmp=true

[Install]
WantedBy=multi-user.target
```



ç„¶åé‡è½½ç³»ç»ŸæœåŠ¡ï¼š

```sh
systemctl daemon-reload
```



ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ç»„å‘½ä»¤æ¥æ“ä½œredisäº†ï¼š

```sh
# å¯åŠ¨
systemctl start redis
# åœæ­¢
systemctl stop redis
# é‡å¯
systemctl restart redis
# æŸ¥çœ‹çŠ¶æ€
systemctl status redis
```



æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥è®©rediså¼€æœºè‡ªå¯ï¼š

```sh
systemctl enable redis
```



# 2.Rediså®¢æˆ·ç«¯

å®‰è£…å®ŒæˆRedisï¼Œæˆ‘ä»¬å°±å¯ä»¥æ“ä½œRedisï¼Œå®ç°æ•°æ®çš„CRUDäº†ã€‚è¿™éœ€è¦ç”¨åˆ°Rediså®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬ï¼š

- å‘½ä»¤è¡Œå®¢æˆ·ç«¯
- å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯
- ç¼–ç¨‹å®¢æˆ·ç«¯



## 2.1.Rediså‘½ä»¤è¡Œå®¢æˆ·ç«¯

Rediså®‰è£…å®Œæˆåå°±è‡ªå¸¦äº†å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼šredis-cliï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š

```sh
redis-cli [options] [commonds]
```

å…¶ä¸­å¸¸è§çš„optionsæœ‰ï¼š

- `-h 127.0.0.1`ï¼šæŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„IPåœ°å€ï¼Œé»˜è®¤æ˜¯127.0.0.1
- `-p 6379`ï¼šæŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯6379
- `-a 123321`ï¼šæŒ‡å®šredisçš„è®¿é—®å¯†ç  

å…¶ä¸­çš„commondså°±æ˜¯Redisçš„æ“ä½œå‘½ä»¤ï¼Œä¾‹å¦‚ï¼š

- `ping`ï¼šä¸redisæœåŠ¡ç«¯åšå¿ƒè·³æµ‹è¯•ï¼ŒæœåŠ¡ç«¯æ­£å¸¸ä¼šè¿”å›`pong`

ä¸æŒ‡å®šcommondæ—¶ï¼Œä¼šè¿›å…¥`redis-cli`çš„äº¤äº’æ§åˆ¶å°ï¼š

![image-20211211110439353](assets/image-20211211110439353.png)



## 2.2.å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯

GitHubä¸Šçš„å¤§ç¥ç¼–å†™äº†Redisçš„å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯ï¼Œåœ°å€ï¼šhttps://github.com/uglide/RedisDesktopManager

ä¸è¿‡è¯¥ä»“åº“æä¾›çš„æ˜¯RedisDesktopManagerçš„æºç ï¼Œå¹¶æœªæä¾›windowså®‰è£…åŒ…ã€‚



åœ¨ä¸‹é¢è¿™ä¸ªä»“åº“å¯ä»¥æ‰¾åˆ°å®‰è£…åŒ…ï¼šhttps://github.com/lework/RedisDesktopManager-Windows/releases

![image-20211211111351885](assets/image-20211211111351885.png)

### 2.2.1.å®‰è£…

åœ¨è¯¾å‰èµ„æ–™ä¸­å¯ä»¥æ‰¾åˆ°Redisçš„å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯ï¼š

![image-20211214154938770](assets/image-20211214154938770.png)

è§£å‹ç¼©åï¼Œè¿è¡Œå®‰è£…ç¨‹åºå³å¯å®‰è£…ï¼š

![image-20211214155123841](assets/image-20211214155123841.png)

æ­¤å¤„ç•¥ã€‚

å®‰è£…å®Œæˆåï¼Œåœ¨å®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°rdm.exeæ–‡ä»¶ï¼š

![image-20211211110935819](assets/image-20211211110935819.png)

åŒå‡»å³å¯è¿è¡Œï¼š

![image-20211214155406692](assets/image-20211214155406692.png)



### 2.2.2.å»ºç«‹è¿æ¥

ç‚¹å‡»å·¦ä¸Šè§’çš„`è¿æ¥åˆ°RedisæœåŠ¡å™¨`æŒ‰é’®ï¼š

![image-20211214155424842](assets/image-20211214155424842.png)

åœ¨å¼¹å‡ºçš„çª—å£ä¸­å¡«å†™RedisæœåŠ¡ä¿¡æ¯ï¼š

![image-20211211111614483](assets/image-20211211111614483.png)

ç‚¹å‡»ç¡®å®šåï¼Œåœ¨å·¦ä¾§èœå•ä¼šå‡ºç°è¿™ä¸ªé“¾æ¥ï¼š

![image-20211214155804523](assets/image-20211214155804523.png)

ç‚¹å‡»å³å¯å»ºç«‹è¿æ¥äº†ï¼š

![image-20211214155849495](assets/image-20211214155849495.png)

Redisé»˜è®¤æœ‰16ä¸ªä»“åº“ï¼Œç¼–å·ä»0è‡³15.  é€šè¿‡é…ç½®æ–‡ä»¶å¯ä»¥è®¾ç½®ä»“åº“æ•°é‡ï¼Œä½†æ˜¯ä¸è¶…è¿‡16ï¼Œå¹¶ä¸”ä¸èƒ½è‡ªå®šä¹‰ä»“åº“åç§°ã€‚

å¦‚æœæ˜¯åŸºäºredis-cliè¿æ¥RedisæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡selectå‘½ä»¤æ¥é€‰æ‹©æ•°æ®åº“ï¼š

```sh
# é€‰æ‹© 0å·åº“
select 0
```





